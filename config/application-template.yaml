# ========================================
# 配置模板 - 所有环境通用配置
# ========================================
# 此文件为配置模板，包含所有可配置项
# 各环境配置文件(application-local/dev/sit/prod.yaml)基于此模板
# 通过 Maven profile (-Plocal, -Pdev, -Psit, -Pprod) 激活对应环境
#
# 使用说明：
# 1. 复制此文件为 application-{env}.yaml
# 2. 根据环境修改服务器地址等配置
# 3. 敏感信息通过环境变量注入，如 ${GEMINI_API_KEY}

# ========================================
# Spring 基础配置
# ========================================
spring:
  application:
    name: catBot
  main:
    allow-circular-references: true
  servlet:
    multipart:
      max-file-size: 20MB
  autoconfigure:
    exclude:
      - org.springframework.boot.autoconfigure.neo4j.Neo4jAutoConfiguration

# ========================================
# 数据源配置
# ========================================
spring:
  data:
    # Redis 配置
    redis:
      host: localhost    # 根据环境修改
      port: 6379
      database: 1

    # MongoDB 配置
    mongodb:
      host: localhost    # 根据环境修改
      port: 27017
      database: catBot   # 根据环境修改
      username: root
      password: ${DB_PASSWORD}
      authentication-database: admin
      auto-index-creation: false

    # Neo4j 配置
    neo4j:
      uri: bolt://localhost:7687  # 根据环境修改
      authentication:
        username: neo4j
        password: ${DB_PASSWORD}

# ========================================
# AI 模型配置 (LangChain4j)
# ========================================
langchain4j:
  models:
    # Google Gemini
    gemini:
      apiKey: ${GEMINI_API_KEY}
      modelName: gemini-2.0-flash
      temperature: 0.7

    # 阿里 Qwen
    qwen:
      apiKey: ${QWEN_API_KEY}
      location: us-central1
      modelName: text-embedding-v2

    # Ollama (本地)
    ollama:
      url: http://localhost:11434
      modelName: gemma3:12b
      temperature: 0.3
      timeout: 600000

    # MiniMax
    minimax:
      baseUrl: https://api.minimaxi.com/v1
      apiKey: ${MINIMAX_API_KEY}
      modelName: MiniMax-M2
      temperature: 0.7

# ========================================
# Milvus 向量数据库配置
# ========================================
milvus:
  uri: http://localhost:19530  # 根据环境修改
  host: localhost              # 根据环境修改
  port: 19530
  enable: false
  open-log: false
  db-name: milvusDB           # 根据环境修改
  packages:
    - com.shuanglin.dao.milvus
  top-k: 5
  defaultDatabaseName: milvusDB
  defaultCollectionName: novelCollection

# ========================================
# AI 服务配置
# ========================================
ai:
  model:
    gemini:
      api-key: ${GEMINI_API_KEY}
    qwen:
      api-key: ${QWEN_API_KEY}
    ollama:
      url: http://localhost:11434  # 根据环境修改
      temperature: 0.3
  rag:
    max-results: 5
    min-score: 0.7
  service:
    base-url: http://localhost:8081  # 根据环境修改
    timeout: 30000

# ========================================
# OneBot API 配置
# ========================================
onebot:
  api:
    base-url: http://127.0.0.1:3000  # 根据环境修改
    timeout: 5000
    retry:
      max-attempts: 3
      delay-ms: 1000
      multiplier: 2.0

# ========================================
# Bot 框架配置
# ========================================
bot:
  framework:
    permission:
      enabled: true
    compatibility:
      legacy-mode: false
  pig:
    image-path: ${user.dir}/bot/src/main/resources/pigs
  log:
    path: ${user.dir}/../APPS/log
    level: INFO

# ========================================
# DJL 模型训练配置
# ========================================
train:
  model:
    cache-enabled: true
    cache-dir: ./model-cache
    max-models: 10

# ========================================
# 服务器配置
# ========================================
server:
  port: 8080

# ========================================
# 日志配置
# ========================================
logging:
  level:
    root: INFO
    com.shuanglin: DEBUG
